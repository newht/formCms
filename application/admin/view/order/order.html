<!--
 * @Author: your name
 * @Date: 2021-01-04 16:19:04
 * @LastEditTime: 2021-01-06 16:59:21
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \project.com\application\admin\view\announce\announce.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理系统</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <style>
        *{margin: 0 auto}
        table{
            padding: 10px;
        }
        td{
            padding: 5px;
            border: #F2F2F2 solid 1px;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;

        }
    </style>
</head>
<body>
<!--<div class="top" style="text-align: right">-->
<!--<input type="button" value="修改审核状态"  class="layui-btn layui-btn-normal">-->
<!--&lt;!&ndash;<input type="radio">未审核&ndash;&gt;-->
<!--</div>-->
<h1>订单列表</h1><br/>
<br/>
<table style="width: 100%; text-align: center;table-layout: fixed;" cellspacing="1" cellpadding="0">
    <tr style="background: #d0d0d0;font-size: 14px">
        <td>序号</td>
        <td>表单名称</td>
        <td>订单号</td>
        <td>订单状态</td>
        <td>订单金额</td>
        <td>创建时间</td>
        <td>修改时间</td>
        <td>操作</td>
    </tr>
    {if condition = 'count($data) != 0'}
    {foreach $data as $key => $v}
    <tr id="tr_{$v.id}">
        <td>{$key}</td>
        <td>{$v.fname}</td>
        <td>{$v.order_id}</td>
        {switch $v.status}
        {case 1}<td>支付成功</td>{/case}
        {case 2}<td>未支付</td>{/case}
        {/switch}
        <td>{$v.money}</td>
        <td>{$v.create_time |date="Y-m-d H:i:s"}</td>
        {empty name="$vo.update_time"}
        <td></td>
        {else/}
        <td>{$v.update_time |date="Y-m-d H:i:s"}</td>
        {/empty}
        <td>
            <i class="layui-icon"><input type="button" class="layui-btn layui-btn-danger layui-btn-xs" value="&#xe640;删除" myid="{$v.id}"></i>
        </td>
    </tr>
    {/foreach}
    {else /}
    <tr>
        <td colspan="10" style="text-align: center;font-size: 13px">没有数据</td>
    </tr>
    {/if}
</table>
</body>
<script type="text/javascript" src="/static/jquery.min.js"></script>
<script type="text/javascript" src="/static/layui/layui.js"></script>
<script>

    layui.use('layer',function () {
        let layer = layui.layer;
    });

    $(function(){
        // 删除订单
        $('.layui-btn-danger').click(function () {
            let id = $(this).attr("myid")
            layer.open({
                content:"确定删除吗",
                title:'删除提示',
                icon:3,
                btn:['我确定','取消'],
                yes:function (index,layero) {
                    var trid = "#tr_"+id;
                    $.ajax({
                        url:"/admin/orderDel",
                        data:{"id":id},
                        type:"post",
                        datatype:"json",
                        success:function (data) {
                            if(data.code == 0){
                                layer.msg(data.msg);
                            }else{
                                layer.msg(data.msg,{time:800});
                                $(trid).remove();
                            }
                        }
                    });
                    layer.close(index)
                }
            });
        })

    })
</script>
</html>